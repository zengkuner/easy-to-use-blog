## vite 原理概述

它使用原生的 `ESM` 模块化语法来加载 js 模块，并且服务器的启动速度和**模块热加载**的速度都非常快，并且支持多种框架的开发，成为了一种比较底层的开发环境，支持 ts、gsx、css 等文件的加载和打包、借助底层 `rollup` 打包工具，vite 支持打包多页应用程序和工具库，之所以说 vite2.0 启动快，是因为**它把项目分成了两个部分**：

#### 一部分是项目的依赖（依赖预构建）

也就是 `package.json` 中指定的库。

- 依赖部分不经常变，那么 `vite2.0` 会提前把用到的依赖打包并保存在 `node modules` 下边的`/.vite `文件夹下。
- 依赖的打包使用的是 `esbuild` 这个打包工具，它是用`go` 语言写的，速度要比 `js` 快得多。
- `vite`只有在项目第一次启动时、添加、删除依赖或者修改了配置时才会重新打包依赖。
- 在打包完成之后，还会通过 `http` 缓存到浏览器中，进一步减少了打包的次数。

#### 另一部分是源代码

一般就是在 src 中写的组件。

- 源代码部分，则是直接运行到**浏览器**中，利用浏览器原生的 `ESM `模块化语法（`import/export`）加载相关的模块。
- 当源代码发生变化时，**模块热部署**只会更新当前页面所涉及到的最小代码。

这样无论应用的大小，模块热部署总是很快。

---

这些与 `webpack` 之类的不同，`webpack` 每次启动都要把整个应用程序进行打包，而且热部署的时候也会把相关的依赖再打包，所以速度很慢。
